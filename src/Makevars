PKG_CFLAGS = -Ihdf5/src
PKG_CXXFLAGS = -Ihdf5/src
PKG_LIBS = libhdf5ForBioC.a -lz -lm -L.

all: $(SHLIB)
$(SHLIB): libhdf5ForBioC.a
H5.o: sourcecode
H5A.o: sourcecode
H5D.o: sourcecode
H5F.o: sourcecode
H5G.o: sourcecode
H5I.o: sourcecode
H5L.o: sourcecode
H5O.o: sourcecode
H5P.o: sourcecode
H5S.o: sourcecode
H5T.o: sourcecode
H5constants.o: sourcecode
h5dump.o: sourcecode
h5ls.o: sourcecode
h5writeDataFrame.o: sourcecode
printdatatype.o: sourcecode
wrap.o: sourcecode
HandleList.o: sourcecode

libhdf5ForBioC.a: sourcecode
	cd hdf5/src && \
	   $(MAKE)
	cp hdf5/src/.libs/libhdf5ForBioC.a .

sourcecode: 
	cd hdf5source && \
	   gunzip -dc hdf5small.tgz | tar xf -;
	mv hdf5source/hdf5 .
	cd hdf5 && \
	   ./configure CC="${CC}" CPP="${CPP}" CXX="${CXX}" CXXCPP="${CXXCPP}" F77="${F77}" --build="${R_ARCH#*/}" --with-pic 
